<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferry Chase</title>
    <style>
        body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
    <script>
    const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: { gravity: { y: 300 } }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    const game = new Phaser.Game(config);
    let player, ferry, dock;
    let isJumping = false;
    let jumpCount = 150;
    let level = 1;
    let ferryDistance = 300;

    function preload() {
        this.load.image('background', 'background.png');
        this.load.image('player', 'player.png');
        this.load.image('ferry', 'ferry.png');
        this.load.image('dock', 'dock.png');
    }

    function create() {
        this.add.image(400, 300, 'background');
        
        dock = this.add.image(400, 575, 'dock');
        dock.setDisplaySize(800, 50);

        player = this.physics.add.sprite(50, 450, 'player');
        player.setDisplaySize(50, 100);
        player.setCollideWorldBounds(true);

        ferry = this.physics.add.image(800 + ferryDistance, 450, 'ferry');
        ferry.setDisplaySize(200, 100);

        this.input.on('pointerdown', jump);
    }

    function update() {
        if (isJumping) {
            if (jumpCount >= -150) {
                player.y -= (jumpCount * Math.abs(jumpCount)) * 0.05;
                jumpCount -= 5;
            } else {
                isJumping = false;
                jumpCount = 150;
                player.y = 450;  // Reset to ground level
            }
        }

        ferry.x -= 2;

        if (Phaser.Geom.Intersects.RectangleToRectangle(player.getBounds(), ferry.getBounds())) {
            console.log(`You caught the ferry! Level ${level} completed!`);
            level++;
            ferryDistance = Math.min(700, ferryDistance + 100);
            resetGame();
        }

        if (ferry.x < -100) {
            resetGame();
        }
    }

    function jump() {
        if (!isJumping) {
            isJumping = true;
        }
    }

    function resetGame() {
        isJumping = false;
        jumpCount = 150;
        player.y = 450;
        ferry.x = 800 + ferryDistance;
    }
    </script>
</body>
</html>
