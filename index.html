<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shark's Italian Food Feast</title>
    <style>
        body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
    <script>
    class GameScene extends Phaser.Scene {
        constructor() {
            super('GameScene');
        }

        // ... (previous preload and create functions remain the same)

        create() {
            // ... (previous create code remains the same)

            this.cursors = this.input.keyboard.createCursorKeys();
            
            // Add touch controls
            this.input.on('pointerdown', this.handleTouch, this);
            this.input.on('pointerup', this.handleTouchEnd, this);

            // ... (rest of the create function remains the same)
        }

        update() {
            this.ferry.x += 0.5;
            if (this.ferry.x - this.ferry.width/2 > 800) {
                this.ferry.x = -this.ferry.width/2;
            }
            
            // Keyboard controls
            if (this.cursors.left.isDown) {
                this.moveShark('left');
            } else if (this.cursors.right.isDown) {
                this.moveShark('right');
            } else if (!this.isTouching) {
                this.shark.setVelocityX(0);
            }
            
            if (this.cursors.up.isDown && this.shark.body.touching.down) {
                this.jumpShark();
            }
            
            if (this.shark.body.touching.down && !this.shark.anims.isPlaying) {
                this.shark.play('swim');
            }
            
            // ... (rest of the update function remains the same)
        }

        handleTouch(pointer) {
            this.isTouching = true;
            if (pointer.y > this.sys.game.config.height * 0.7) {
                // Lower 30% of the screen: move left/right
                if (pointer.x < this.sys.game.config.width / 2) {
                    this.moveShark('left');
                } else {
                    this.moveShark('right');
                }
            } else {
                // Upper 70% of the screen: jump
                this.jumpShark();
            }
        }

        handleTouchEnd() {
            this.isTouching = false;
            this.shark.setVelocityX(0);
        }

        moveShark(direction) {
            const speed = 200;
            this.shark.setVelocityX(direction === 'left' ? -speed : speed);
        }

        jumpShark() {
            if (this.shark.body.touching.down) {
                this.shark.setVelocityY(-300);
                this.shark.play('jump');
            }
        }

        // ... (rest of the class methods remain the same)
    }

    const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: { gravity: { y: 300 }, debug: false }
        },
        scene: GameScene
    };

    new Phaser.Game(config);
    </script>
</body>
</html>
